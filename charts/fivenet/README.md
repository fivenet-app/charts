---
title: FiveNet Helm Chart
---
<!---
Document is generated by `make helm-docs`. DO NOT EDIT.
Edit the corresponding *.gotmpl.md file instead
-->

Installs [FiveNet](https://github.com/fivenet-app/fivenet).

## Prerequisites

* Kubernetes 1.19+
* Helm 3.x

See the [Helm support matrix](https://helm.sh/docs/topics/version_skew/) for more details.

## Installing

```console
helm repo add fivenet https://fivenet.app/charts
helm install fivenet/fivenet -f values.yaml

# Or upgrade
helm upgrade --install fivenet fivenet/fivenet -f values.yaml
```

For example settings, see the next section or [values.yaml](/charts/fivenet/values.yaml).

### Must Change Values

The following values must be changed before installing the chart:

- `fivenet.config.secret`: The secret key used to encrypt certain data in the database. This should be exactly a 32 characters long, random string.
- `fivenet.config.database.dsn`: The database connection string. This should be in the format `user:password@host:port/database`. Make sure to replace `user`, `password`, `host`, `port`, and `database` with your actual database credentials.
- `fivenet.config.jwt.secret`: The secret key used to sign JSON Web Tokens (JWT). This should be a random string of at least 32 characters.
- `fivenet.config.http.sessions.cookieSecret`: The secret key used to sign session cookies. This should be a random string of at least 32 characters.

## Configuration

The following table lists the configurable parameters of the FiveNet chart and their default values.

| Parameter | Description | Default |
|-----------|-------------|---------|
| `additionalEnv` | Additional environment variables to set in the server, worker and discord pods | `[]` |
| `additionalVolumeMounts` | Additional volume mounts to mount into the server, worker and discord pods | `[]` |
| `additionalVolumes` | Additional volumes to mount into the server, worker and discord pods | `[]` |
| `affinity` |  | `{}` |
| `dbsync` | FiveNet DBSync deployment config | `{"additionalEnv":[],"args":["dbsync","run"],"config":{"destination":{"api":{"insecure":false,"timeout":"5s","token":"YOUR_SYNC_API_TOKEN","transportSecurity":true,"url":"fivenet.example.com"},"dryRun":false,"method":"api","syncInterval":"5s"},"limits":{"accounts":100,"jobs":200,"licenses":200,"users":150,"vehicles":500},"logLevel":"INFO","source":{"baseDataResyncInterval":"5m","connMaxIdleTime":"10m","connMaxLifetime":"45m","disableLocking":false,"dsn":"DB_USER:DB_PASS@tcp(DB_HOST:DB_PORT)/DB_NAME?collation=utf8mb4_unicode_ci&loc=Europe%2FBerlin","maxIdleConns":5,"maxOpenConns":12},"stateFile":"/state/dbsync.state.yaml","tableManager":{"enabled":true},"tables":{"accounts":{"enabled":false,"query":"","tableName":"admin_accounts","updatedTimeColumn":"updated_at"},"jobGrades":{"columns":{"grade":"grade","jobName":"job_name","label":"label","name":"name"},"enabled":true,"tableName":"job_grades"},"jobs":{"columns":{"label":"label","name":"name"},"enabled":true,"filters":[],"tableName":"jobs"},"licenses":{"columns":{"label":"label","type":"type"},"enabled":true,"tableName":"licenses"},"userJobs":{"enabled":false},"userLicenses":{"columns":{"ownerIdentifier":"owner","type":"type"},"enabled":true,"tableName":"user_licenses"},"userPhoneNumbers":{"enabled":false,"query":"SELECT\n  `phone_number` AS `user_phone_number.number`,\n  (ROW_NUMBER() OVER (ORDER BY `is_primary` DESC) = 1) AS `user_phone_number.is_primary`\nFROM user_phone_numbers\nWHERE user_phone_numbers.identifier = $identifier\nORDER BY `is_primary` DESC, `phone_number`;\n"},"users":{"columns":{"dateOfBirth":"dateofbirth","firstname":"firstname","group":"group","height":"height","id":"id","identifier":"identifier","job":"job","jobGrade":"job_grade","lastname":"lastname","phoneNumber":"phone_number","playtime":"-","sex":"sex","visum":"-"},"dateOfBirth":{"formats":["2006-01-02","02/01/2006","02.01.2006"],"outputFormat":"02.01.2006"},"enabled":true,"filters":{"jobs":[]},"ignoreEmptyNames":true,"splitName":true,"tableName":"users","updatedTimeColumn":"last_seen","valueMapping":{"sex":{"fallback":"m","values":{"1":"f"}}}},"vehicles":{"columns":{"model":"-","ownerIdentifier":"owner","plate":"plate","type":"type"},"enabled":true,"tableName":"owned_vehicles","updatedTimeColumn":"updated_at"}},"watchConfig":false},"enabled":false,"image":{"pullPolicy":"IfNotPresent","repository":"ghcr.io/fivenet-app/fivenet","tag":""},"livenessProbe":null,"persistence":{"accessModes":["ReadWriteOnce"],"annotations":{},"enabled":false,"extraPvcLabels":{},"finalizers":["kubernetes.io/pvc-protection"],"size":"1Gi","volumeName":""},"readinessProbe":null,"replicaCount":1,"resources":{},"revisionHistoryLimit":1,"startupProbe":null,"strategy":{"type":"Recreate"}}` |
| `dbsync.additionalEnv` | Additional environment variables (e.g., to set the timezone via the TZ variable) | `[]` |
| `dbsync.args` | Arguments to pass to the container command | `["dbsync","run"]` |
| `dbsync.config` | DBSync config - This only shows some of the most important options, for all options please refer to the [DBSync configuration reference](https://fivenet.app/getting-started/configuration/dbsync-config-reference) | `{"destination":{"api":{"insecure":false,"timeout":"5s","token":"YOUR_SYNC_API_TOKEN","transportSecurity":true,"url":"fivenet.example.com"},"dryRun":false,"method":"api","syncInterval":"5s"},"limits":{"accounts":100,"jobs":200,"licenses":200,"users":150,"vehicles":500},"logLevel":"INFO","source":{"baseDataResyncInterval":"5m","connMaxIdleTime":"10m","connMaxLifetime":"45m","disableLocking":false,"dsn":"DB_USER:DB_PASS@tcp(DB_HOST:DB_PORT)/DB_NAME?collation=utf8mb4_unicode_ci&loc=Europe%2FBerlin","maxIdleConns":5,"maxOpenConns":12},"stateFile":"/state/dbsync.state.yaml","tableManager":{"enabled":true},"tables":{"accounts":{"enabled":false,"query":"","tableName":"admin_accounts","updatedTimeColumn":"updated_at"},"jobGrades":{"columns":{"grade":"grade","jobName":"job_name","label":"label","name":"name"},"enabled":true,"tableName":"job_grades"},"jobs":{"columns":{"label":"label","name":"name"},"enabled":true,"filters":[],"tableName":"jobs"},"licenses":{"columns":{"label":"label","type":"type"},"enabled":true,"tableName":"licenses"},"userJobs":{"enabled":false},"userLicenses":{"columns":{"ownerIdentifier":"owner","type":"type"},"enabled":true,"tableName":"user_licenses"},"userPhoneNumbers":{"enabled":false,"query":"SELECT\n  `phone_number` AS `user_phone_number.number`,\n  (ROW_NUMBER() OVER (ORDER BY `is_primary` DESC) = 1) AS `user_phone_number.is_primary`\nFROM user_phone_numbers\nWHERE user_phone_numbers.identifier = $identifier\nORDER BY `is_primary` DESC, `phone_number`;\n"},"users":{"columns":{"dateOfBirth":"dateofbirth","firstname":"firstname","group":"group","height":"height","id":"id","identifier":"identifier","job":"job","jobGrade":"job_grade","lastname":"lastname","phoneNumber":"phone_number","playtime":"-","sex":"sex","visum":"-"},"dateOfBirth":{"formats":["2006-01-02","02/01/2006","02.01.2006"],"outputFormat":"02.01.2006"},"enabled":true,"filters":{"jobs":[]},"ignoreEmptyNames":true,"splitName":true,"tableName":"users","updatedTimeColumn":"last_seen","valueMapping":{"sex":{"fallback":"m","values":{"1":"f"}}}},"vehicles":{"columns":{"model":"-","ownerIdentifier":"owner","plate":"plate","type":"type"},"enabled":true,"tableName":"owned_vehicles","updatedTimeColumn":"updated_at"}},"watchConfig":false}` |
| `dbsync.persistence` | Persistence configuration (will be mounted at `/state`) | `{"accessModes":["ReadWriteOnce"],"annotations":{},"enabled":false,"extraPvcLabels":{},"finalizers":["kubernetes.io/pvc-protection"],"size":"1Gi","volumeName":""}` |
| `dbsync.persistence.enabled` | It is recommended to enable persistence to ensure the state file. | `false` |
| `dbsync.persistence.size` | Requested size of the PersistentVolumeClaim (PVC). | `"1Gi"` |
| `dbsync.persistence.volumeName` | Use this to bind the claim to an existing PersistentVolume (PV) by name. | `""` |
| `dbsync.strategy` | Deployment strategy | `{"type":"Recreate"}` |
| `discord` | FiveNet Discord Bot deployment config | `{"additionalEnv":[],"args":["discord"],"enabled":true,"image":{"pullPolicy":"IfNotPresent","repository":"ghcr.io/fivenet-app/fivenet","tag":""},"livenessProbe":{"httpGet":{"path":"/readiness","port":"metrics"},"initialDelaySeconds":15,"periodSeconds":10},"readinessProbe":null,"replicaCount":1,"resources":{},"revisionHistoryLimit":1,"startupProbe":{"failureThreshold":20,"httpGet":{"path":"/readiness","port":"metrics"},"initialDelaySeconds":5,"periodSeconds":10}}` |
| `discord.additionalEnv` | Additional environment variables (e.g., to set the timezone via the TZ variable) | `[]` |
| `discord.args` | Arguments to pass to the container command | `["discord"]` |
| `extraObjects` | Extra objects to deploy (value evaluated as a template) | `[]` |
| `fivenet.config` | FiveNet config, make sure to checkout the [config reference documentation](https://fivenet.app/getting-started/configuration/config-reference) | `{"audit":{"retentionDays":90},"auth":{"superuserGroups":["projektleiter","teamleitung"],"superuserUsers":[]},"database":{"connMaxIdleTime":"15m","connMaxLifetime":"60m","custom":{"columns":{"user":{"playtime":"playtime","visum":"visum"},"vehicle":{"model":"model"}},"conditions":{"user":{"filterEmptyName":false}}},"dsn":"DB_USER:DB_PASS@tcp(DB_HOST:DB_PORT)/DB_NAME?collation=utf8mb4_unicode_ci&loc=Europe%2FBerlin","esxCompat":true,"maxIdleConns":5,"maxOpenConns":32},"discord":{"commands":{"absent":true,"enabled":true,"fivenet":true,"help":true,"sync":true},"dryRun":false,"enabled":false,"groupSync":{"enabled":false,"mapping":{"fraktionsverwaltung":{"notSameJob":true,"roleName":"Fraktionsverwaltung"},"teamleitung":{"roleName":"Teamleitung"}}},"qualifications":{"enabled":true},"sync":true,"token":"your_discord_bot_token","userInfoSync":{"employeeRoleFormat":"%s Employees","enabled":false,"gradeRoleFormat":"[%grade%] %grade_label%","jobsAbsceneRoleName":"Absent","unemployedRoleName":"Citizen"}},"dispatchCenter":{"convertJobs":[],"type":"gksphone"},"game":{"cleanupRolesForMissingJobs":false,"startJobGrade":0},"http":{"adminListen":":7070","listen":":8080","origins":["https://fivenet.example.com"],"publicURL":"https://fivenet.example.com","sessions":{"cookieSecret":"your_generated_cookie_secret","domain":"fivenet.example.com"},"trustedProxies":[]},"icons":{"apiUrl":"https://api.iconify.design","enabled":true,"path":"./icons","proxy":false},"imageProxy":{"cachePrefix":"images/","enabled":true,"options":{"allowHosts":[],"denyHosts":[]},"url":"/api/image_proxy/"},"jwt":{"secret":"your_generated_jwt_secret"},"logLevel":"INFO","logLevelOverrides":{"cron":"INFO","kvstore":"INFO","locks":"INFO","perms":"INFO"},"mode":"release","nats":{"replicas":1,"url":"nats://fivenet:fivenet_topsecret@nats:4222"},"oauth2":{"providers":[]},"otlp":{"attributes":["k8s.namespace.name=${POD_NAMESPACE}"],"compression":"none","enabled":false,"environment":"live","frontend":{"headers":{},"url":""},"headers":{},"insecure":false,"ratio":0.1,"timeout":"10s","type":"stdout","url":"http://localhost:4317"},"postalsFile":".output/public/data/postals.json","secret":"your_generated_db_secret_32_char","storage":{"filesystem":{"path":".data/","prefix":""},"s3":{"accessKeyID":"","bucketName":"","checkOnStartup":false,"endpoint":"","prefix":"","region":"us-east-1","retries":3,"secretAccessKey":"","useSSL":true},"type":"filesystem"},"sync":{"apiTokens":[],"enabled":false},"updateCheck":{"enabled":true,"interval":"6h"}}` |
| `fullnameOverride` |  | `""` |
| `imagePullSecrets` |  | `[]` |
| `ingress.annotations` |  | `{}` |
| `ingress.className` | Ingress class name | `"nginx"` |
| `ingress.enabled` | If an ingress object should be created. | `true` |
| `ingress.hosts[0].host` |  | `"chart-example.local"` |
| `ingress.hosts[0].paths[0].path` |  | `"/"` |
| `ingress.hosts[0].paths[0].pathType` |  | `"ImplementationSpecific"` |
| `ingress.tls` |  | `[]` |
| `ingressGRPC.annotations."nginx.ingress.kubernetes.io/backend-protocol"` |  | `"GRPC"` |
| `ingressGRPC.annotations."nginx.ingress.kubernetes.io/proxy-read-timeout"` |  | `"2400"` |
| `ingressGRPC.annotations."nginx.ingress.kubernetes.io/proxy-send-timeout"` |  | `"2400"` |
| `ingressGRPC.annotations."nginx.ingress.kubernetes.io/ssl-redirect"` |  | `"true"` |
| `ingressGRPC.annotations."nginx.ingress.kubernetes.io/use-regex"` |  | `"true"` |
| `ingressGRPC.className` | Ingress class name | `"nginx"` |
| `ingressGRPC.enabled` | If an ingress object for GRPC API access should be created. Requires TLS certs for HTTPS and a separate subdomain. Used for DBSync and the plugin API. | `true` |
| `ingressGRPC.hosts[0].host` |  | `"chart-example-grpc.local"` |
| `ingressGRPC.hosts[0].paths[0].path` |  | `"/services.+"` |
| `ingressGRPC.hosts[0].paths[0].pathType` |  | `"ImplementationSpecific"` |
| `ingressGRPC.tls` |  | `[]` |
| `migration` | Migration job config | `{"enabled":true}` |
| `migration.enabled` | Specifies whether the migration job should be created | `true` |
| `nameOverride` |  | `""` |
| `nats` | NATS server/cluster config values: https://artifacthub.io/packages/helm/nats/nats#values | `{"config":{"cluster":{"enabled":true,"replicas":3},"jetstream":{"enabled":true,"fileStore":{"enabled":true,"pvc":{"enabled":true,"size":"5Gi"}},"memoryStore":{"enabled":true,"maxSize":"64Mi"}},"merge":{"accounts":{"fivenet":{"jetstream":"enabled","users":[{"password":"fivenet","user":"fivenet"}]}},"max_payload":3145728}},"enabled":true,"promExporter":{"enabled":true,"image":{"repository":"docker.io/natsio/prometheus-nats-exporter"},"podMonitor":{"enabled":false,"patch":[{"op":"add","path":"/spec/podMetricsEndpoints/0/interval","value":"30s"}]}}}` |
| `nats.enabled` | If disabled you must run your own Nats server or cluster. | `true` |
| `nodeSelector` |  | `{}` |
| `podAnnotations` |  | `{}` |
| `podSecurityContext.fsGroup` |  | `2000` |
| `securityContext` | Security context (the provided values work with the official container image) https://kubernetes.io/docs/tasks/configure-pod-container/security-context/ | `{"allowPrivilegeEscalation":false,"capabilities":{"drop":["ALL"]},"readOnlyRootFilesystem":false,"runAsGroup":2000,"runAsNonRoot":true,"runAsUser":2000,"seccompProfile":{"type":"RuntimeDefault"}}` |
| `server.additionalEnv` | Additional environment variables (e.g., to set the timezone via the TZ variable) | `[]` |
| `server.args` | Arguments to pass to the container command | `["server"]` |
| `server.enabled` |  | `true` |
| `server.image.pullPolicy` |  | `"IfNotPresent"` |
| `server.image.repository` |  | `"ghcr.io/fivenet-app/fivenet"` |
| `server.image.tag` |  | `""` |
| `server.livenessProbe.failureThreshold` |  | `3` |
| `server.livenessProbe.httpGet.path` |  | `"/readiness"` |
| `server.livenessProbe.httpGet.port` |  | `"metrics"` |
| `server.livenessProbe.initialDelaySeconds` |  | `25` |
| `server.livenessProbe.periodSeconds` |  | `10` |
| `server.readinessProbe` |  | `nil` |
| `server.replicaCount` |  | `1` |
| `server.resources` |  | `{}` |
| `server.revisionHistoryLimit` |  | `1` |
| `server.startupProbe.failureThreshold` |  | `30` |
| `server.startupProbe.httpGet.path` |  | `"/readiness"` |
| `server.startupProbe.httpGet.port` |  | `"metrics"` |
| `server.startupProbe.initialDelaySeconds` |  | `20` |
| `server.startupProbe.periodSeconds` |  | `10` |
| `service.type` |  | `"ClusterIP"` |
| `serviceAccount.annotations` |  | `{}` |
| `serviceAccount.create` |  | `true` |
| `serviceAccount.name` |  | `""` |
| `serviceMonitor` | Prometheus-operator ServiceMonitor config | `{"additionalLabels":{},"enabled":false,"namespaceSelector":null,"scrapeInterval":"30s"}` |
| `serviceMonitor.additionalLabels` | Additional Labels for the ServiceMonitor object | `{}` |
| `serviceMonitor.enabled` | Specifies whether a prometheus-operator ServiceMonitor should be created | `false` |
| `serviceMonitor.scrapeInterval` | Interval at which metrics should be scraped | `"30s"` |
| `tolerations` |  | `[]` |
| `worker` | FiveNet Worker deployment config | `{"additionalEnv":[],"args":["worker"],"enabled":true,"image":{"pullPolicy":"IfNotPresent","repository":"ghcr.io/fivenet-app/fivenet","tag":""},"livenessProbe":{"httpGet":{"path":"/readiness","port":"metrics"},"initialDelaySeconds":15,"periodSeconds":10},"readinessProbe":null,"replicaCount":1,"resources":{},"revisionHistoryLimit":1,"startupProbe":{"failureThreshold":20,"httpGet":{"path":"/readiness","port":"metrics"},"initialDelaySeconds":5,"periodSeconds":10}}` |
| `worker.additionalEnv` | Additional environment variables (e.g., to set the timezone via the TZ variable) | `[]` |
| `worker.args` | Arguments to pass to the container command | `["worker"]` |

## Uninstalling the Chart

To see the currently installed FiveNet chart:

```console
helm ls
```

To uninstall/delete the `fivenet` deployment:

```console
helm delete fivenet
```

The command removes all the Kubernetes components associated with the chart and deletes the release.

## License

Apache 2.0 License, see [LICENSE](/LICENSE).
